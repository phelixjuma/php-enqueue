#!/usr/bin/env php
<?php

require 'vendor/autoload.php';

use Phelixjuma\Enqueue\Manager;
use Phelixjuma\Enqueue\RedisQueue;
use Dotenv\Dotenv;

print getcwd();
$dotenv = Dotenv::createImmutable(getcwd());

$dotenv->load();

$redisHost = getenv('REDIS_HOST') ?: ($_ENV['REDIS_HOST'] ?? "");
$redisPort = getenv('REDIS_PORT') ?: ($_ENV['REDIS_PORT'] ?? "");

$redis = new Predis\Client("tcp://$redisHost:$redisPort");

$queue = new RedisQueue($redis);

$application = new Manager($queue);
$application->run();
